#!/usr/bin/env node
/* eslint no-var: 0, vars-on-top: 0 */
require('babel-polyfill');
var mysql2rethinkdb = require('../');
var argv = require('yargs')
  .usage('Usage: $0 -D [database]')
  .example('$0 -u root -D test -t user_table post_table')
  .alias('h', 'host')
  .nargs('h', 1)
  .describe('h', 'Mysql host')
  .alias('u', 'user')
  .nargs('u', 1)
  .describe('u', 'Mysql user')
  .alias('p', 'password')
  .nargs('p', 1)
  .describe('p', 'Mysql user password')
  .alias('P', 'port')
  .nargs('P', 1)
  .describe('P', 'Mysql port')
  .alias('D', 'database')
  .nargs('D', 1)
  .demand(['D'])
  .describe('D', 'Mysql database')
  .alias('t', 'tables')
  .array('t')
  .describe('t', 'Mysql tables')
  .alias('w', 'workers')
  .nargs('w', 1)
  .default('w', 8)
  .describe('w', 'Parallel worker count')
  .help('help')
  .argv;

mysql2rethinkdb({
  host: argv.host,
  user: argv.user,
  password: argv.password,
  port: argv.port,
  database: argv.database,
  tables: argv.tables,
  workers: argv.workers,
}).then(function () {
  process.exit();
});
